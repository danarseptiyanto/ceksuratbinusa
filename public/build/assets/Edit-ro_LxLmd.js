import{u as h,j as e,H as f,L as j,r as g}from"./app-B_9L7nKH.js";import{A as v,e as _,S as N,f as y,g as C,h as b,i as c}from"./AppLayout-Codsk7vn.js";import{B as d}from"./button-DBthnSD4.js";import{C as S,a as k,b as F,c as w}from"./card-BrzzDmI2.js";import{I as n}from"./input-DClp9e_n.js";import{L as i}from"./label-DhXengM4.js";import{P,a as D,f as m,b as T,C as L}from"./popover-CJ9cVB1n.js";import{C as E}from"./checkbox-D5anrymW.js";import{c as I}from"./utils-BDuvvNPR.js";import{T as K}from"./trash-2-B8JZz56d.js";import{L as A}from"./loader-circle-BJQjggs9.js";import"./dropdown-menu-5-80GTLW.js";import"./index-BzCe_R5B.js";import"./index-3ynpB_5I.js";import"./createLucideIcon-xSjhD0JD.js";import"./FlashMessage-jID0DyfD.js";function Z({surat:s}){const{data:r,setData:l,post:u,errors:t,processing:o}=h({_method:"PUT",nomor_surat:s.nomor_surat||"",kepada:s.kepada||"",nama_surat:s.nama_surat||"",tanggal_surat:s.tanggal_surat||"",pdf_file:null,tipe:s.tipe||"",showpdf:s.showpdf??!0});function p(a){a.preventDefault(),u(route("surat.update",s.id),{forceFormData:!0,preserveScroll:!0})}function x(a){a.preventDefault(),confirm("Are you sure you want to delete the attached PDF file?")&&g.delete(route("surat.deleteFile",s.id),{preserveScroll:!0})}return e.jsxs(v,{bc1:"Surat Keluar",bc2:"Edit Surat Keluar",children:[e.jsx(f,{title:"Edit Surat"}),e.jsxs("div",{className:"-mx-5 border-b px-5 py-5",children:[e.jsx("h1",{className:"text-2xl font-semibold leading-normal",children:"Edit Surat Keluar"}),e.jsx("p",{className:"text-muted-foreground",children:"Perbarui detail surat keluar dan kelola file lampiran."})]}),e.jsx("div",{className:"py-4",children:e.jsx("div",{className:"mx-auto",children:e.jsx("form",{onSubmit:p,children:e.jsxs(S,{children:[e.jsx(k,{className:"border-b",children:e.jsx("h1",{className:"text-lg font-semibold leading-tight",children:"Formulir Edit Surat"})}),e.jsxs(F,{className:"space-y-5 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"nomor_surat",children:"Nomor Surat"}),e.jsx(n,{id:"nomor_surat",type:"text",value:r.nomor_surat,onChange:a=>l("nomor_surat",a.target.value),autoComplete:"off"}),t.nomor_surat&&e.jsx("p",{className:"text-sm text-destructive",children:t.nomor_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"kepada",children:"Kepada"}),e.jsx(n,{id:"kepada",type:"text",value:r.kepada,onChange:a=>l("kepada",a.target.value),autoComplete:"off"}),t.kepada&&e.jsx("p",{className:"text-sm text-destructive",children:t.kepada})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"nama_surat",children:"Nama / Perihal Surat"}),e.jsx(n,{id:"nama_surat",type:"text",value:r.nama_surat,onChange:a=>l("nama_surat",a.target.value),autoComplete:"off"}),t.nama_surat&&e.jsx("p",{className:"text-sm text-destructive",children:t.nama_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"tanggal_surat",children:"Tanggal Surat"}),e.jsxs(P,{children:[e.jsx(D,{asChild:!0,children:e.jsxs(d,{variant:"outline",className:I("w-full justify-start text-left font-normal",!r.tanggal_surat&&"text-muted-foreground"),children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),r.tanggal_surat?m(new Date(r.tanggal_surat),"PPP"):e.jsx("span",{children:"Pilih tanggal"})]})}),e.jsx(T,{className:"w-auto p-0",children:e.jsx(L,{mode:"single",selected:new Date(r.tanggal_surat),onSelect:a=>l("tanggal_surat",m(a,"yyyy-MM-dd")),initialFocus:!0})})]}),t.tanggal_surat&&e.jsx("p",{className:"text-sm text-destructive",children:t.tanggal_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Manajemen File PDF"}),s.file_path?e.jsxs("div",{className:"flex items-center gap-3 rounded-md bg-muted p-3 px-6",children:[e.jsx("a",{href:`/storage/${s.file_path}`,target:"_blank",rel:"noopener noreferrer",className:"flex-grow text-sm font-medium text-primary hover:underline",children:"Lihat File Saat Ini"}),e.jsx(d,{type:"button",variant:"destructive",size:"icon",onClick:x,children:e.jsx(K,{className:"h-4 w-4"})})]}):e.jsx("p",{className:"text-sm italic text-muted-foreground",children:"Tidak ada file PDF yang terlampir."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"pdf_file",children:"Upload File Baru (Akan menggantikan file lama)"}),e.jsx(n,{id:"pdf_file",type:"file",accept:".pdf",onChange:a=>l("pdf_file",a.target.files[0])}),t.pdf_file&&e.jsx("p",{className:"text-sm text-destructive",children:t.pdf_file})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"tipe",children:"Tipe Surat"}),e.jsxs(N,{value:r.tipe,onValueChange:a=>l("tipe",a),children:[e.jsx(y,{children:e.jsx(C,{placeholder:"Pilih tipe surat"})}),e.jsxs(b,{children:[e.jsx(c,{value:"surat keluar",children:"Surat Keluar"}),e.jsx(c,{value:"surat internal",children:"Surat Internal"})]})]}),t.tipe&&e.jsx("p",{className:"text-sm text-destructive",children:t.tipe})]}),e.jsxs("div",{className:"space-y-2 pt-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:"showpdf",checked:r.showpdf,onCheckedChange:a=>l("showpdf",a)}),e.jsx("label",{htmlFor:"showpdf",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Tampilkan PDF"})]}),t.showpdf&&e.jsx("p",{className:"text-sm text-destructive",children:t.showpdf})]})]})]}),e.jsxs(w,{className:"flex justify-end gap-2 rounded-b-lg border-t bg-muted pt-5",children:[e.jsx(d,{asChild:!0,variant:"outline",children:e.jsx(j,{href:route("surat.index"),children:"Cancel"})}),e.jsxs(d,{type:"submit",disabled:o,children:[o&&e.jsx(A,{className:"mr-2 h-4 w-4 animate-spin"}),"Update"]})]})]})})})})]})}export{Z as default};
