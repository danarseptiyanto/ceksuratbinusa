import{u as f,b as g,j as e,H as F,L as T}from"./app-DktLjeTq.js";import{A as P,j as L,D as M,q as H,k as z,l as I,m as B,n as A,e as E,o as O,p as U,U as R}from"./AppLayout-BvxskOai.js";import{I as n}from"./input-Itq6a97V.js";import{L as d}from"./label-CPF9QRwq.js";import{c as $}from"./utils-Bm1bTW3s.js";import{P as q,a as K,f as N,b as G,C as J}from"./popover-Dbw_BnUu.js";import{C as Q,T as V,a as W,b as u,c as l,d as X,e as t,H as Y,f as Z,B as ee,g as ae,F as se,S as re,h as te,i as le,j as ie,E as ne}from"./table-Dk5fT72Y.js";import{D as de,a as oe,b as ce,c as x,d as me}from"./dropdown-menu-Cs1lDkWh.js";import{B as o}from"./button-C0IKOdp2.js";import{L as ue}from"./loader-circle-CjYTMAvO.js";import{F as xe}from"./file-digit-Deqvt6eN.js";import{C as he}from"./circle-alert-BKpm3cVf.js";import"./card-DE8XjYsP.js";import"./index-DVvnpQcZ.js";import"./index-Duvr7LqQ.js";import"./createLucideIcon-C9IFYqAO.js";import"./FlashMessage-CgDad9QS.js";function Le({suratMasuks:_}){const{delete:b}=f(),[c,v]=g.useState(""),[w,h]=g.useState(!1),{data:r,setData:i,post:C,errors:s,processing:p,reset:y}=f({nomor_surat:"",nama_surat:"",asal_surat:"",tanggal_surat:new Date().toISOString().slice(0,10),pdf_file:null});function D(a){a.preventDefault(),C(route("surat-masuk.store"),{onSuccess:()=>{y(),h(!1)}})}function S(a,m){a.preventDefault(),confirm("Are you sure you want to delete this item?")&&b(route("surat-masuk.destroy",m),{preserveScroll:!0})}const j=_.filter(a=>a.nomor_surat.toLowerCase().includes(c.toLowerCase())||a.nama_surat.toLowerCase().includes(c.toLowerCase()));return e.jsxs(P,{bc1:"Surat Masuk",bc2:"Daftar Surat Masuk",children:[e.jsx(F,{title:"Surat Masuk"}),e.jsxs("div",{className:"-mx-5 border-b px-5 py-5",children:[e.jsx("h1",{className:"text-2xl font-semibold leading-normal",children:"Surat Masuk"}),e.jsx("p",{className:"text-muted-foreground",children:"Buat, kelola, atau hapus daftar surat masuk."})]}),e.jsxs("div",{className:"mb-4 mt-5 flex items-center justify-between",children:[e.jsxs("div",{className:"relative w-72",children:[e.jsx(L,{className:"absolute left-3 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-muted-foreground"}),e.jsx(n,{type:"text",placeholder:"Cari nomor dan perihal surat...",className:"pl-8",value:c,onChange:a=>v(a.target.value)})]}),e.jsxs(M,{open:w,onOpenChange:h,children:[e.jsx(H,{asChild:!0,children:e.jsxs(o,{variant:"default",children:[e.jsx(Q,{className:"h-4 w-4"})," Tambah"]})}),e.jsx(z,{className:"sm:max-w-[725px]",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs(I,{children:[e.jsx(B,{children:"Formulir Surat Masuk"}),e.jsx(A,{children:"Isi semua detail surat yang diperlukan. Klik Simpan jika sudah selesai."})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"nomor_surat",children:"Nomor Surat"}),e.jsx(n,{id:"nomor_surat",type:"text",value:r.nomor_surat,onChange:a=>i("nomor_surat",a.target.value),autoComplete:"off"}),s.nomor_surat&&e.jsx("p",{className:"text-sm text-destructive",children:s.nomor_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"asal_surat",children:"Asal Surat (Pengirim)"}),e.jsx(n,{id:"asal_surat",type:"text",value:r.asal_surat,onChange:a=>i("asal_surat",a.target.value),autoComplete:"off"}),s.asal_surat&&e.jsx("p",{className:"text-sm text-destructive",children:s.asal_surat})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"nama_surat",children:"Nama / Perihal Surat"}),e.jsx(n,{id:"nama_surat",type:"text",value:r.nama_surat,onChange:a=>i("nama_surat",a.target.value),autoComplete:"off"}),s.nama_surat&&e.jsx("p",{className:"text-sm text-destructive",children:s.nama_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"tanggal_surat",children:"Tanggal Surat"}),e.jsxs(q,{children:[e.jsx(K,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:$("w-full justify-start text-left font-normal",!r.tanggal_surat&&"text-muted-foreground"),children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),r.tanggal_surat?N(new Date(r.tanggal_surat),"PPP"):e.jsx("span",{children:"Pilih tanggal"})]})}),e.jsx(G,{className:"w-auto p-0",children:e.jsx(J,{mode:"single",selected:r.tanggal_surat?new Date(r.tanggal_surat):null,onSelect:a=>i("tanggal_surat",N(a,"yyyy-MM-dd")),initialFocus:!0})})]}),s.tanggal_surat&&e.jsx("p",{className:"text-sm text-destructive",children:s.tanggal_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"pdf_file",children:"Upload File PDF (Opsional)"}),e.jsx(n,{id:"pdf_file",type:"file",accept:".pdf",onChange:a=>i("pdf_file",a.target.files[0])}),s.pdf_file&&e.jsx("p",{className:"text-sm text-destructive",children:s.pdf_file})]}),e.jsxs(O,{children:[e.jsx(U,{asChild:!0,children:e.jsx(o,{variant:"outline",children:"Cancel"})}),e.jsxs(o,{type:"submit",disabled:p,children:[p&&e.jsx(ue,{className:"mr-2 h-4 w-4 animate-spin"}),"Save"]})]})]})})]})]}),e.jsx("div",{className:"overflow-hidden rounded-lg border",children:e.jsxs(V,{children:[e.jsx(W,{className:"bg-muted/50",children:e.jsxs(u,{children:[e.jsx(l,{className:"w-[50px] border-r text-center",children:"No"}),e.jsx(l,{className:"whitespace-nowrap border-r",children:"Nomor Surat"}),e.jsx(l,{className:"w-full border-r",children:"Perihal"}),e.jsx(l,{className:"whitespace-nowrap border-r",children:"Pengirim"}),e.jsx(l,{className:"w-[150px] text-nowrap border-r",children:"Tanggal Surat"}),e.jsx(l,{className:"border-r px-2 text-center",children:"File"}),e.jsx(l,{className:"px-2 text-center",children:"Aksi"})]})}),e.jsx(X,{children:j.length>0?j.map((a,m)=>e.jsxs(u,{className:"hover:bg-muted/50",children:[e.jsx(t,{className:"border-r text-center font-medium",children:m+1}),e.jsx(t,{className:"border-r",children:e.jsxs(Y,{children:[e.jsx(Z,{children:e.jsx(ee,{className:"h-6 cursor-pointer font-medium",children:a.nomor_surat})}),e.jsx(ae,{children:e.jsxs("ul",{className:"flex flex-col gap-3",children:[e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(xe,{size:14})}),a.nomor_surat]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(se,{size:14})}),a.nama_surat]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(re,{size:14})}),a.asal_surat]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(R,{size:14})}),a.user.name]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(te,{size:14})}),new Date(a.tanggal_surat).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(le,{size:14})}),a.file_path?e.jsx("div",{children:"File Sudah Diupload"}):e.jsx("div",{children:"File Belum Diupload"})]})]})})]})}),e.jsx(t,{className:"border-r",children:a.nama_surat}),e.jsx(t,{className:"whitespace-nowrap border-r",children:a.asal_surat}),e.jsx(t,{className:"text-nowrap border-r",children:new Date(a.tanggal_surat).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}),e.jsx(t,{className:"border-r text-center",children:a.file_path?e.jsx(ie,{size:18,className:"mx-auto text-green-500"}):e.jsx(he,{size:18,className:"mx-auto text-red-500"})}),e.jsx(t,{className:"px-0 py-0 text-center",children:e.jsxs(de,{children:[e.jsx(oe,{asChild:!0,children:e.jsxs(o,{variant:"ghost",className:"m-0 h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ne,{className:"h-4 w-4"})]})}),e.jsxs(ce,{align:"end",className:"w-36",children:[a.file_path&&e.jsx(x,{className:"cursor-pointer",asChild:!0,children:e.jsx("a",{href:`/storage/${a.file_path}`,target:"_blank",rel:"noopener noreferrer",children:"Lihat File"})}),e.jsx(x,{className:"cursor-pointer",asChild:!0,children:e.jsx(T,{href:route("surat-masuk.edit",a.id),children:"Edit"})}),e.jsx(me,{}),e.jsx(x,{className:"cursor-pointer text-red-600 focus:text-red-600",onClick:k=>S(k,a.id),children:"Delete"})]})]})})]},a.id)):e.jsx(u,{children:e.jsx(t,{colSpan:"8",className:"h-24 text-center",children:"Tidak ada data ditemukan."})})})]})})]})}export{Le as default};
