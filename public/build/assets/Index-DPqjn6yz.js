import{u as b,b as d,a as A,j as e,L as K}from"./app-qQtkfDB5.js";import U from"./QRDownload-Beg4mquG.js";import{S as y,C as R,T as O,a as X,b as g,c as n,d as $,e as l,H as q,f as J,B as Q,g as Y,F as G,h as W,U as Z,i as ee,j as ae,k as se,E as re,D as te,l as le,m as ie,n as ne,o as de,p as ce,q as oe}from"./table-DSbD1QGO.js";import{A as me,S as C,e as k,f as S,g as _,h as m}from"./AppLayout-CNsRoC3t.js";import{C as he}from"./checkbox-DMoAWGLW.js";import{L as c}from"./label-ComfwfVR.js";import{P as xe,a as ue,f as D,C as pe,b as je,c as fe}from"./popover-B9yfPIU1.js";import{c as ge,a as Ne}from"./utils-Sh_wmKkL.js";import{D as ve,a as we,b as be,c as j,d as ye}from"./dropdown-menu-Cuyh_Cof.js";import{I as h}from"./input-DWDkh_rY.js";import{B as x}from"./button-CJS6p0JT.js";import{F as Ce}from"./file-digit-CP9yWIlL.js";import{E as ke}from"./eye-DT8bo6m4.js";import{C as Se}from"./circle-alert-ByNAqId-.js";import{L as _e}from"./loader-circle-bRv45Ji3.js";import"./index-DC1Cmutx.js";import"./index-fTd_8mII.js";import"./card-BdJUdt6s.js";import"./FlashMessage-TJtCMQBR.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"m14 18 4-4 4 4",key:"ftkppy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M18 22v-8",key:"su0gjh"}],["path",{d:"M21 11.343V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9",key:"1exg90"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]],Ie=ge("calendar-arrow-up",De);function We({surats:N}){const{delete:I}=b(),[o,T]=d.useState(""),[u,F]=d.useState("all"),[P,p]=d.useState(!1),{url:Te}=A();d.useRef(!1),d.useEffect(()=>{new URLSearchParams(window.location.search).get("action")==="create"&&(p(!0),window.history.replaceState({},"",route("surat.index")))},[]);const f=new Date,M=f.getFullYear(),L=`/ST/SMK.BN/${["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII"][f.getMonth()]}/${M}`,{data:r,setData:i,post:z,reset:B,errors:s,processing:v}=b({nomor_surat:L,nama_surat:"",kepada:"",tanggal_surat:f.toISOString().slice(0,10),pdf_file:null,tipe:"surat internal",showpdf:!0});function V(a){a.preventDefault(),z(route("surat.store"),{onSuccess:()=>{B(),p(!1)}})}const w=d.useMemo(()=>{let a=N;return o&&(a=a.filter(t=>t.nomor_surat.toLowerCase().includes(o.toLowerCase())||t.nama_surat.toLowerCase().includes(o.toLowerCase()))),u!=="all"&&(a=a.filter(t=>t.tipe===u)),a},[N,o,u]);function H(a,t){a.preventDefault(),confirm("Are you sure you want to delete this item?")&&I(route("surat.destroy",t),{preserveScroll:!0})}return e.jsxs(me,{bc1:"Surat Keluar",bc2:"Daftar Surat Keluar",children:[e.jsxs("div",{className:"-mx-5 border-b px-5 py-5",children:[e.jsx("h1",{className:"text-2xl font-semibold leading-normal",children:"Surat Keluar"}),e.jsx("p",{className:"text-muted-foreground",children:"Buat, kelola, atau hapus daftar surat keluar."})]}),e.jsxs("div",{className:"mb-4 mt-5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative w-72",children:[e.jsx(y,{className:"absolute left-3 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-muted-foreground"}),e.jsx(h,{type:"text",placeholder:"Cari nomor dan perihal surat...",value:o,onChange:a=>T(a.target.value),className:"pl-8"})]}),e.jsxs(C,{value:u,onValueChange:F,children:[e.jsxs(k,{className:"relative w-44",children:[e.jsx(y,{className:"absolute left-3 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-muted-foreground"}),e.jsx("div",{className:"pl-6",children:e.jsx(S,{placeholder:"Filter by type"})})]}),e.jsxs(_,{children:[e.jsx(m,{value:"all",children:"All"}),e.jsx(m,{value:"surat keluar",children:"Surat Keluar"}),e.jsx(m,{value:"surat internal",children:"Surat Internal"})]})]})]}),e.jsxs(x,{variant:"default",onClick:()=>p(!0),children:[e.jsx(R,{})," Tambah"]})]}),e.jsx("div",{className:"overflow-hidden rounded-lg border",children:e.jsxs(O,{children:[e.jsx(X,{className:"bg-muted",children:e.jsxs(g,{children:[e.jsx(n,{className:"w-[10px] border-r",children:"No"}),e.jsx(n,{className:"w-[210px] text-nowrap border-r",children:"Nomor Surat"}),e.jsx(n,{className:"w-full border-r",children:"Perihal"}),e.jsx(n,{className:"text-nowrap border-r",children:"Jenis"}),e.jsx(n,{className:"text-nowrap border-r",children:"Tanggal"}),e.jsx(n,{className:"text-nowrap border-r px-0 text-center",children:"PDF"}),e.jsx(n,{className:"px-2",children:"Aksi"})]})}),e.jsx($,{children:w.length>0?w.map((a,t)=>e.jsxs(g,{children:[e.jsx(l,{className:"border-r text-center",scope:"row",children:t+1}),e.jsx(l,{className:"border-r",children:e.jsxs(q,{children:[e.jsx(J,{children:e.jsx(Q,{className:"h-6 cursor-pointer font-medium",children:a.nomor_surat})}),e.jsx(Y,{children:e.jsxs("ul",{className:"flex flex-col gap-3",children:[e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(Ce,{size:14})}),a.nomor_surat]}),e.jsxs("li",{className:"inline-flex items-center gap-2 capitalize",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(G,{size:14})}),a.tipe]}),e.jsxs("li",{className:"inline-flex items-center gap-2 capitalize",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(W,{size:14})}),a.kepada]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(Z,{size:14})}),a.user.name]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(ee,{size:14})}),new Date(a.tanggal_surat).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(ae,{size:14})}),a.file_path?e.jsx("div",{children:"PDF Sudah Diupload"}):e.jsx("div",{children:"PDF Belum Diupload"})]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(ke,{size:14})}),a.showpdf?e.jsx("div",{children:"PDF Boleh Diakses"}):e.jsx("div",{children:"PDF Tidak Boleh Diakses"})]})]})})]})}),e.jsx(l,{className:"border-r",children:a.nama_surat}),e.jsx(l,{className:"whitespace-nowrap border-r capitalize",children:a.tipe}),e.jsx(l,{className:"whitespace-nowrap",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ie,{size:15,className:"text-muted-foreground"}),new Date(a.tanggal_surat).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})]})}),e.jsx(l,{className:"whitespace-nowrap border-x",children:a.file_path?e.jsx(se,{size:15,className:"text-green-500"}):e.jsx(Se,{size:15,className:"text-red-500"})}),e.jsx(l,{className:"px-0 py-0 text-center",children:e.jsxs(ve,{children:[e.jsx(we,{asChild:!0,children:e.jsx(x,{variant:"ghost",className:"m-0 h-8 w-8 p-0",children:e.jsx(re,{className:"h-4 w-4"})})}),e.jsxs(be,{className:"w-36",align:"end",children:[a.file_path&&e.jsx(j,{className:"cursor-pointer",asChild:!0,children:e.jsx("a",{href:`/storage/${a.file_path}`,target:"_blank",rel:"noopener noreferrer",children:"Buka file PDF"})}),e.jsx(U,{slug:a.slug}),e.jsx(j,{className:"cursor-pointer",asChild:!0,children:e.jsx("a",{href:route("surat.verify",a.slug),target:"_blank",children:"Link Verifikasi"})}),e.jsx(j,{className:"cursor-pointer",asChild:!0,children:e.jsx(K,{href:route("surat.edit",a.id),children:"Edit Nomor Surat"})}),e.jsx(ye,{}),e.jsx(j,{className:"cursor-pointer text-red-600 focus:text-red-600",onClick:E=>H(E,a.id),children:"Hapus"})]})]})})]},a.id)):e.jsx(g,{children:e.jsx(l,{colSpan:"7",className:"h-24 text-center",children:"Tidak ada data ditemukan."})})})]})}),e.jsx(te,{open:P,onOpenChange:p,children:e.jsx(le,{className:"sm:max-w-[725px]",children:e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs(ie,{children:[e.jsx(ne,{children:"Tambah Surat Baru"}),e.jsx(de,{children:"Isi detail surat kemudian klik Simpan untuk menambahkan."})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"nomor_surat",children:"Nomor Surat"}),e.jsx(h,{id:"nomor_surat",type:"text",value:r.nomor_surat,onChange:a=>i("nomor_surat",a.target.value),autoComplete:"off"}),s.nomor_surat&&e.jsx("p",{className:"text-sm text-destructive",children:s.nomor_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"kepada",children:"Kepada"}),e.jsx(h,{id:"kepada",type:"text",value:r.kepada,onChange:a=>i("kepada",a.target.value),autoComplete:"off"}),s.kepada&&e.jsx("p",{className:"text-sm text-destructive",children:s.kepada})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"nama_surat",children:"Nama / Perihal Surat"}),e.jsx(h,{id:"nama_surat",type:"text",value:r.nama_surat,onChange:a=>i("nama_surat",a.target.value),autoComplete:"off"}),s.nama_surat&&e.jsx("p",{className:"text-sm text-destructive",children:s.nama_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"tanggal_surat",children:"Tanggal Surat"}),e.jsxs(xe,{children:[e.jsx(ue,{asChild:!0,children:e.jsxs(x,{variant:"outline",className:Ne("w-full justify-start text-left font-normal",!r.tanggal_surat&&"text-muted-foreground"),children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),r.tanggal_surat?D(new Date(r.tanggal_surat),"PPP"):e.jsx("span",{children:"Pilih tanggal"})]})}),e.jsx(je,{className:"w-auto p-0",children:e.jsx(fe,{mode:"single",selected:new Date(r.tanggal_surat),onSelect:a=>i("tanggal_surat",D(a,"yyyy-MM-dd")),initialFocus:!0})})]}),s.tanggal_surat&&e.jsx("p",{className:"text-sm text-destructive",children:s.tanggal_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"pdf_file",children:"Upload PDF (Optional)"}),e.jsx(h,{id:"pdf_file",type:"file",accept:".pdf",onChange:a=>i("pdf_file",a.target.files[0])}),s.pdf_file&&e.jsx("p",{className:"text-sm text-destructive",children:s.pdf_file})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"tipe",children:"Tipe Surat"}),e.jsxs(C,{value:r.tipe,onValueChange:a=>i("tipe",a),children:[e.jsx(k,{children:e.jsx(S,{placeholder:"Pilih tipe surat"})}),e.jsxs(_,{children:[e.jsx(m,{value:"surat keluar",children:"Surat Keluar"}),e.jsx(m,{value:"surat internal",children:"Surat Internal"})]})]}),s.tipe&&e.jsx("p",{className:"text-sm text-destructive",children:s.tipe})]}),e.jsxs("div",{className:"space-y-2 pt-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{id:"showpdf",checked:r.showpdf,onCheckedChange:a=>i("showpdf",a)}),e.jsx("label",{htmlFor:"showpdf",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Tampilkan PDF"})]}),s.showpdf&&e.jsx("p",{className:"text-sm text-destructive",children:s.showpdf})]})]}),e.jsxs(ce,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(x,{variant:"outline",children:"Batal"})}),e.jsxs(x,{type:"submit",disabled:v,children:[v&&e.jsx(_e,{className:"h-4 w-4 animate-spin"}),"Simpan"]})]})]})})})]})}export{We as default};
