import{u as f,b as g,j as e,H as F,L as T}from"./app-BnYilwhI.js";import{A as P,j as L,D as M,q as H,k as z,l as I,m as B,n as A,e as E,o as O,p as U,U as R}from"./AppLayout-zNy1P9CM.js";import{I as n}from"./input-CFO6dOkR.js";import{L as d}from"./label-D2J-ELL6.js";import{c as $}from"./utils-B3jIpFGq.js";import{P as q,a as K,f as N,b as G,C as J}from"./popover-D7_Se8u5.js";import{C as Q,T as V,a as W,b as u,c as l,d as X,e as t,E as Y}from"./table-DwqBU_4y.js";import{D as Z,a as ee,b as ae,c as x,d as se}from"./dropdown-menu-DdinN7G-.js";import{B as c}from"./button-CBKUNvmI.js";import{H as re,a as te,B as le,b as ie,F as ne,S as de,C as ce,c as oe,d as me}from"./hover-card-Hwkhj9YC.js";import{L as ue}from"./loader-circle-Cw7qfAwi.js";import{F as xe}from"./file-digit-B_R_qSa1.js";import{C as he}from"./circle-alert-ip7Xx5Sw.js";import"./card-Bb3HSPca.js";import"./index-BtjgxV4w.js";import"./index-D3MQp8cT.js";import"./createLucideIcon-C2F9xOZR.js";import"./FlashMessage-ilqZxBoe.js";function Me({suratMasuks:_}){const{delete:b}=f(),[o,v]=g.useState(""),[w,h]=g.useState(!1),{data:r,setData:i,post:C,errors:s,processing:j,reset:y}=f({nomor_surat:"",nama_surat:"",asal_surat:"",tanggal_surat:new Date().toISOString().slice(0,10),pdf_file:null});function D(a){a.preventDefault(),C(route("surat-masuk.store"),{onSuccess:()=>{y(),h(!1)}})}function S(a,m){a.preventDefault(),confirm("Are you sure you want to delete this item?")&&b(route("surat-masuk.destroy",m),{preserveScroll:!0})}const p=_.filter(a=>a.nomor_surat.toLowerCase().includes(o.toLowerCase())||a.nama_surat.toLowerCase().includes(o.toLowerCase()));return e.jsxs(P,{bc1:"Surat Masuk",bc2:"Daftar Surat Masuk",children:[e.jsx(F,{title:"Surat Masuk"}),e.jsxs("div",{className:"-mx-5 border-b px-5 py-5",children:[e.jsx("h1",{className:"text-2xl font-semibold leading-normal",children:"Surat Masuk"}),e.jsx("p",{className:"text-muted-foreground",children:"Buat, kelola, atau hapus daftar surat masuk."})]}),e.jsxs("div",{className:"mb-4 mt-5 flex items-center justify-between",children:[e.jsxs("div",{className:"relative w-72",children:[e.jsx(L,{className:"absolute left-3 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-muted-foreground"}),e.jsx(n,{type:"text",placeholder:"Cari nomor dan perihal surat...",className:"pl-8",value:o,onChange:a=>v(a.target.value)})]}),e.jsxs(M,{open:w,onOpenChange:h,children:[e.jsx(H,{asChild:!0,children:e.jsxs(c,{variant:"default",children:[e.jsx(Q,{className:"h-4 w-4"})," Tambah"]})}),e.jsx(z,{className:"sm:max-w-[725px]",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs(I,{children:[e.jsx(B,{children:"Formulir Surat Masuk"}),e.jsx(A,{children:"Isi semua detail surat yang diperlukan. Klik Simpan jika sudah selesai."})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"nomor_surat",children:"Nomor Surat"}),e.jsx(n,{id:"nomor_surat",type:"text",value:r.nomor_surat,onChange:a=>i("nomor_surat",a.target.value),autoComplete:"off"}),s.nomor_surat&&e.jsx("p",{className:"text-sm text-destructive",children:s.nomor_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"asal_surat",children:"Asal Surat (Pengirim)"}),e.jsx(n,{id:"asal_surat",type:"text",value:r.asal_surat,onChange:a=>i("asal_surat",a.target.value),autoComplete:"off"}),s.asal_surat&&e.jsx("p",{className:"text-sm text-destructive",children:s.asal_surat})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"nama_surat",children:"Nama / Perihal Surat"}),e.jsx(n,{id:"nama_surat",type:"text",value:r.nama_surat,onChange:a=>i("nama_surat",a.target.value),autoComplete:"off"}),s.nama_surat&&e.jsx("p",{className:"text-sm text-destructive",children:s.nama_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"tanggal_surat",children:"Tanggal Surat"}),e.jsxs(q,{children:[e.jsx(K,{asChild:!0,children:e.jsxs(c,{variant:"outline",className:$("w-full justify-start text-left font-normal",!r.tanggal_surat&&"text-muted-foreground"),children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),r.tanggal_surat?N(new Date(r.tanggal_surat),"PPP"):e.jsx("span",{children:"Pilih tanggal"})]})}),e.jsx(G,{className:"w-auto p-0",children:e.jsx(J,{mode:"single",selected:r.tanggal_surat?new Date(r.tanggal_surat):null,onSelect:a=>i("tanggal_surat",N(a,"yyyy-MM-dd")),initialFocus:!0})})]}),s.tanggal_surat&&e.jsx("p",{className:"text-sm text-destructive",children:s.tanggal_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"pdf_file",children:"Upload File PDF (Opsional)"}),e.jsx(n,{id:"pdf_file",type:"file",accept:".pdf",onChange:a=>i("pdf_file",a.target.files[0])}),s.pdf_file&&e.jsx("p",{className:"text-sm text-destructive",children:s.pdf_file})]}),e.jsxs(O,{children:[e.jsx(U,{asChild:!0,children:e.jsx(c,{variant:"outline",children:"Cancel"})}),e.jsxs(c,{type:"submit",disabled:j,children:[j&&e.jsx(ue,{className:"mr-2 h-4 w-4 animate-spin"}),"Save"]})]})]})})]})]}),e.jsx("div",{className:"overflow-hidden rounded-lg border",children:e.jsxs(V,{children:[e.jsx(W,{className:"bg-muted/50",children:e.jsxs(u,{children:[e.jsx(l,{className:"w-[50px] border-r text-center",children:"No"}),e.jsx(l,{className:"whitespace-nowrap border-r",children:"Nomor Surat"}),e.jsx(l,{className:"w-full border-r",children:"Perihal"}),e.jsx(l,{className:"border-r",children:"Pengirim"}),e.jsx(l,{className:"w-[150px] text-nowrap border-r",children:"Tanggal Surat"}),e.jsx(l,{className:"border-r px-2 text-center",children:"File"}),e.jsx(l,{className:"px-2 text-center",children:"Aksi"})]})}),e.jsx(X,{children:p.length>0?p.map((a,m)=>e.jsxs(u,{className:"hover:bg-muted/50",children:[e.jsx(t,{className:"border-r text-center font-medium",children:m+1}),e.jsx(t,{className:"border-r",children:e.jsxs(re,{children:[e.jsx(te,{children:e.jsx(le,{variant:"outline",className:"h-6 max-w-52 cursor-pointer truncate font-medium",children:a.nomor_surat})}),e.jsx(ie,{children:e.jsxs("ul",{className:"flex flex-col gap-3",children:[e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(xe,{size:14})}),a.nomor_surat]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(ne,{size:14})}),a.nama_surat]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(de,{size:14})}),a.asal_surat]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(R,{size:14})}),a.user.name]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(ce,{size:14})}),new Date(a.tanggal_surat).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(oe,{size:14})}),a.file_path?e.jsx("div",{children:"File Sudah Diupload"}):e.jsx("div",{children:"File Belum Diupload"})]})]})})]})}),e.jsx(t,{className:"max-w-0 border-r",children:e.jsx("div",{className:"truncate",title:a.nama_surat,children:a.nama_surat})}),e.jsx(t,{className:"border-r",children:e.jsx("div",{className:"max-w-40 truncate",title:a.asal_surat,children:a.asal_surat})}),e.jsx(t,{className:"text-nowrap border-r",children:new Date(a.tanggal_surat).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}),e.jsx(t,{className:"border-r text-center",children:a.file_path?e.jsx(me,{size:18,className:"mx-auto text-green-500"}):e.jsx(he,{size:18,className:"mx-auto text-red-500"})}),e.jsx(t,{className:"px-0 py-0 text-center",children:e.jsxs(Z,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(c,{variant:"ghost",className:"m-0 h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Y,{className:"h-4 w-4"})]})}),e.jsxs(ae,{align:"end",className:"w-36",children:[a.file_path&&e.jsx(x,{className:"cursor-pointer",asChild:!0,children:e.jsx("a",{href:`/storage/${a.file_path}`,target:"_blank",rel:"noopener noreferrer",children:"Lihat File"})}),e.jsx(x,{className:"cursor-pointer",asChild:!0,children:e.jsx(T,{href:route("surat-masuk.edit",a.id),children:"Edit"})}),e.jsx(se,{}),e.jsx(x,{className:"cursor-pointer text-red-600 focus:text-red-600",onClick:k=>S(k,a.id),children:"Delete"})]})]})})]},a.id)):e.jsx(u,{children:e.jsx(t,{colSpan:"8",className:"h-24 text-center",children:"Tidak ada data ditemukan."})})})]})})]})}export{Me as default};
