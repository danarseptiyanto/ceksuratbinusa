import{u as b,r as c,a as E,j as e,L as K}from"./app-CKcKn5G_.js";import U from"./QRDownload-DcuAF3NZ.js";import{H as R,a as $,B as O,b as X,F as q,S as J,C as Q,c as Y,d as G}from"./hover-card-DXVyUMmc.js";import{A as W,j as Z,S as y,f as C,g as _,h as k,i as m,U as ee,D as ae,k as se,l as re,m as te,n as le,e as ie,o as ne,p as ce}from"./AppLayout-7wiPwI8j.js";import{C as de}from"./checkbox-BhR56D_S.js";import{L as d}from"./label-ByXhAipn.js";import{P as oe,a as me,f as S,b as ue,C as xe}from"./popover-Ig8A8ngR.js";import{a as he}from"./utils-96rSsNMG.js";import{C as pe,T as je,a as fe,b as g,c as n,d as ge,e as l,E as Ne}from"./table-CKy7VRh_.js";import{D as ve,a as we,b as be,c as j,d as ye}from"./dropdown-menu-CUG4tRgH.js";import{I as u}from"./input-CZ6b6Qg6.js";import{B as x}from"./button-CE3-ZWWt.js";import{c as D}from"./createLucideIcon-CD5axm5M.js";import{F as Ce}from"./file-digit-fkar2Flc.js";import{E as _e}from"./eye-CLStY8FP.js";import{C as ke}from"./circle-alert-J74rlxJt.js";import{L as Se}from"./loader-circle-DA7SHpqa.js";import"./index-Chjiymov.js";import"./index-CROtX8m6.js";import"./index-Sidlrmuh.js";import"./card-Cw6B8wPE.js";import"./FlashMessage-D859V-z6.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"m14 18 4-4 4 4",key:"ftkppy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M18 22v-8",key:"su0gjh"}],["path",{d:"M21 11.343V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9",key:"1exg90"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]],Ie=D("calendar-arrow-up",De);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Te=D("funnel",Fe);function ra({surats:N}){const{delete:I}=b(),[o,F]=c.useState(""),[h,T]=c.useState("all"),[P,p]=c.useState(!1),{url:Pe}=E();c.useRef(!1),c.useEffect(()=>{new URLSearchParams(window.location.search).get("action")==="create"&&(p(!0),window.history.replaceState({},"",route("surat.index")))},[]);const f=new Date,M=f.getFullYear(),L=`/ST/SMK.BN/${["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII"][f.getMonth()]}/${M}`,{data:r,setData:i,post:z,reset:B,errors:s,processing:v}=b({nomor_surat:L,nama_surat:"",kepada:"",tanggal_surat:f.toISOString().slice(0,10),pdf_file:null,tipe:"surat internal",showpdf:!0});function A(a){a.preventDefault(),z(route("surat.store"),{onSuccess:()=>{B(),p(!1)}})}const w=c.useMemo(()=>{let a=N;return o&&(a=a.filter(t=>t.nomor_surat.toLowerCase().includes(o.toLowerCase())||t.nama_surat.toLowerCase().includes(o.toLowerCase()))),h!=="all"&&(a=a.filter(t=>t.tipe===h)),a},[N,o,h]);function H(a,t){a.preventDefault(),confirm("Are you sure you want to delete this item?")&&I(route("surat.destroy",t),{preserveScroll:!0})}return e.jsxs(W,{bc1:"Surat Keluar",bc2:"Daftar Surat Keluar",children:[e.jsxs("div",{className:"-mx-5 border-b px-5 py-5",children:[e.jsx("h1",{className:"text-2xl font-semibold leading-normal",children:"Surat Keluar"}),e.jsx("p",{className:"text-muted-foreground",children:"Buat, kelola, atau hapus daftar surat keluar."})]}),e.jsxs("div",{className:"mb-4 mt-5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative w-72",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-muted-foreground"}),e.jsx(u,{type:"text",placeholder:"Cari nomor dan perihal surat...",value:o,onChange:a=>F(a.target.value),className:"pl-8"})]}),e.jsxs(y,{value:h,onValueChange:T,children:[e.jsxs(C,{className:"relative w-44",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-muted-foreground"}),e.jsx("div",{className:"pl-6",children:e.jsx(_,{placeholder:"Filter by type"})})]}),e.jsxs(k,{children:[e.jsx(m,{value:"all",children:"All"}),e.jsx(m,{value:"surat keluar",children:"Surat Keluar"}),e.jsx(m,{value:"surat internal",children:"Surat Internal"})]})]})]}),e.jsxs(x,{variant:"default",onClick:()=>p(!0),children:[e.jsx(pe,{})," Tambah"]})]}),e.jsx("div",{className:"overflow-hidden rounded-lg border",children:e.jsxs(je,{children:[e.jsx(fe,{className:"bg-muted",children:e.jsxs(g,{children:[e.jsx(n,{className:"w-[10px] border-r",children:"No"}),e.jsx(n,{className:"w-[210px] text-nowrap border-r",children:"Nomor Surat"}),e.jsx(n,{className:"w-full border-r",children:"Perihal"}),e.jsx(n,{className:"text-nowrap border-r",children:"Jenis"}),e.jsx(n,{className:"text-nowrap border-r",children:"Tanggal"}),e.jsx(n,{className:"text-nowrap border-r px-0 text-center",children:"PDF"}),e.jsx(n,{className:"px-2",children:"Aksi"})]})}),e.jsx(ge,{children:w.length>0?w.map((a,t)=>e.jsxs(g,{children:[e.jsx(l,{className:"border-r text-center",scope:"row",children:t+1}),e.jsx(l,{className:"border-r",children:e.jsxs(R,{children:[e.jsx($,{children:e.jsx(O,{variant:"outline",className:"h-6 max-w-48 cursor-pointer truncate font-medium",children:a.nomor_surat})}),e.jsx(X,{children:e.jsxs("ul",{className:"flex flex-col gap-3",children:[e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(Ce,{size:14})}),a.nomor_surat]}),e.jsxs("li",{className:"inline-flex items-center gap-2 capitalize",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(q,{size:14})}),a.tipe]}),e.jsxs("li",{className:"inline-flex items-center gap-2 capitalize",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(J,{size:14})}),a.kepada]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(ee,{size:14})}),a.user.name]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(Q,{size:14})}),new Date(a.tanggal_surat).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(Y,{size:14})}),a.file_path?e.jsx("div",{children:"PDF Sudah Diupload"}):e.jsx("div",{children:"PDF Belum Diupload"})]}),e.jsxs("li",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border bg-muted",children:e.jsx(_e,{size:14})}),a.showpdf?e.jsx("div",{children:"PDF Boleh Diakses"}):e.jsx("div",{children:"PDF Tidak Boleh Diakses"})]})]})})]})}),e.jsx(l,{className:"max-w-0 border-r",children:e.jsx("div",{className:"truncate",title:a.nama_surat,children:a.nama_surat})}),e.jsx(l,{className:"whitespace-nowrap border-r capitalize",children:a.tipe}),e.jsx(l,{className:"whitespace-nowrap",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ie,{size:15,className:"text-muted-foreground"}),new Date(a.tanggal_surat).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})]})}),e.jsx(l,{className:"whitespace-nowrap border-x",children:a.file_path?e.jsx(G,{size:15,className:"text-green-500"}):e.jsx(ke,{size:15,className:"text-red-500"})}),e.jsx(l,{className:"px-0 py-0 text-center",children:e.jsxs(ve,{children:[e.jsx(we,{asChild:!0,children:e.jsx(x,{variant:"ghost",className:"m-0 h-8 w-8 p-0",children:e.jsx(Ne,{className:"h-4 w-4"})})}),e.jsxs(be,{className:"w-36",align:"end",children:[a.file_path&&e.jsx(j,{className:"cursor-pointer",asChild:!0,children:e.jsx("a",{href:`/storage/${a.file_path}`,target:"_blank",rel:"noopener noreferrer",children:"Buka file PDF"})}),e.jsx(U,{slug:a.slug}),e.jsx(j,{className:"cursor-pointer",asChild:!0,children:e.jsx("a",{href:route("surat.verify",a.slug),target:"_blank",children:"Link Verifikasi"})}),e.jsx(j,{className:"cursor-pointer",asChild:!0,children:e.jsx(K,{href:route("surat.edit",a.id),children:"Edit Nomor Surat"})}),e.jsx(ye,{}),e.jsx(j,{className:"cursor-pointer text-red-600 focus:text-red-600",onClick:V=>H(V,a.id),children:"Hapus"})]})]})})]},a.id)):e.jsx(g,{children:e.jsx(l,{colSpan:"7",className:"h-24 text-center",children:"Tidak ada data ditemukan."})})})]})}),e.jsx(ae,{open:P,onOpenChange:p,children:e.jsx(se,{className:"sm:max-w-[725px]",children:e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs(re,{children:[e.jsx(te,{children:"Tambah Surat Baru"}),e.jsx(le,{children:"Isi detail surat kemudian klik Simpan untuk menambahkan."})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"nomor_surat",children:"Nomor Surat"}),e.jsx(u,{id:"nomor_surat",type:"text",value:r.nomor_surat,onChange:a=>i("nomor_surat",a.target.value),autoComplete:"off"}),s.nomor_surat&&e.jsx("p",{className:"text-sm text-destructive",children:s.nomor_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"kepada",children:"Kepada"}),e.jsx(u,{id:"kepada",type:"text",value:r.kepada,onChange:a=>i("kepada",a.target.value),autoComplete:"off"}),s.kepada&&e.jsx("p",{className:"text-sm text-destructive",children:s.kepada})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"nama_surat",children:"Nama / Perihal Surat"}),e.jsx(u,{id:"nama_surat",type:"text",value:r.nama_surat,onChange:a=>i("nama_surat",a.target.value),autoComplete:"off"}),s.nama_surat&&e.jsx("p",{className:"text-sm text-destructive",children:s.nama_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"tanggal_surat",children:"Tanggal Surat"}),e.jsxs(oe,{children:[e.jsx(me,{asChild:!0,children:e.jsxs(x,{variant:"outline",className:he("w-full justify-start text-left font-normal",!r.tanggal_surat&&"text-muted-foreground"),children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),r.tanggal_surat?S(new Date(r.tanggal_surat),"PPP"):e.jsx("span",{children:"Pilih tanggal"})]})}),e.jsx(ue,{className:"w-auto p-0",children:e.jsx(xe,{mode:"single",selected:new Date(r.tanggal_surat),onSelect:a=>i("tanggal_surat",S(a,"yyyy-MM-dd")),initialFocus:!0})})]}),s.tanggal_surat&&e.jsx("p",{className:"text-sm text-destructive",children:s.tanggal_surat})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"pdf_file",children:"Upload PDF (Optional)"}),e.jsx(u,{id:"pdf_file",type:"file",accept:".pdf",onChange:a=>i("pdf_file",a.target.files[0])}),s.pdf_file&&e.jsx("p",{className:"text-sm text-destructive",children:s.pdf_file})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"tipe",children:"Tipe Surat"}),e.jsxs(y,{value:r.tipe,onValueChange:a=>i("tipe",a),children:[e.jsx(C,{children:e.jsx(_,{placeholder:"Pilih tipe surat"})}),e.jsxs(k,{children:[e.jsx(m,{value:"surat keluar",children:"Surat Keluar"}),e.jsx(m,{value:"surat internal",children:"Surat Internal"})]})]}),s.tipe&&e.jsx("p",{className:"text-sm text-destructive",children:s.tipe})]}),e.jsxs("div",{className:"space-y-2 pt-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"showpdf",checked:r.showpdf,onCheckedChange:a=>i("showpdf",a)}),e.jsx("label",{htmlFor:"showpdf",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Tampilkan PDF"})]}),s.showpdf&&e.jsx("p",{className:"text-sm text-destructive",children:s.showpdf})]})]}),e.jsxs(ne,{children:[e.jsx(ce,{asChild:!0,children:e.jsx(x,{variant:"outline",children:"Batal"})}),e.jsxs(x,{type:"submit",disabled:v,children:[v&&e.jsx(Se,{className:"h-4 w-4 animate-spin"}),"Simpan"]})]})]})})})]})}export{ra as default};
