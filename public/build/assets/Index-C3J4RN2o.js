import{u as x,r as o,a as A,j as e}from"./app-CKcKn5G_.js";import{A as I,j as B,D as w,k as f,l as N,m as v,n as g,o as C,p as b}from"./AppLayout-7wiPwI8j.js";import{I as t}from"./input-CZ6b6Qg6.js";import{B as i}from"./button-CE3-ZWWt.js";import{L as l}from"./label-ByXhAipn.js";import{C as H,T as R,a as q,b as h,c as d,d as z,e as n,E as G}from"./table-CKy7VRh_.js";import{D as J,a as K,b as Q,c as y,d as V}from"./dropdown-menu-CUG4tRgH.js";import{P as W}from"./pencil-BIQVXJRS.js";import{T as X}from"./trash-2-D8lGraS4.js";import{L as D}from"./loader-circle-DA7SHpqa.js";import"./utils-96rSsNMG.js";import"./card-Cw6B8wPE.js";import"./index-CROtX8m6.js";import"./index-Sidlrmuh.js";import"./createLucideIcon-CD5axm5M.js";import"./FlashMessage-D859V-z6.js";function he({users:_}){const{delete:S}=x(),[c,T]=o.useState(""),[E,m]=o.useState(!1),[F,p]=o.useState(!1),[U,u]=o.useState(null),{flash:Y}=A().props,r=x({name:"",email:"",password:"",password_confirmation:""}),a=x({name:"",email:"",password:"",password_confirmation:""}),j=_.filter(s=>s.name.toLowerCase().includes(c.toLowerCase())||s.email.toLowerCase().includes(c.toLowerCase()));function L(s){s.preventDefault(),r.post(route("users.store"),{onSuccess:()=>{r.reset(),m(!1)}})}function P(s){s.preventDefault(),a.patch(route("users.update",U.id),{onSuccess:()=>{a.reset(),p(!1),u(null)}})}function k(s){u(s),a.setData({name:s.name,email:s.email,password:"",password_confirmation:""}),p(!0)}function M(s){confirm("Are you sure you want to delete this user?")&&S(route("users.destroy",s),{preserveScroll:!0})}return e.jsxs(I,{bc1:"Users",bc2:"Manage Users",children:[e.jsxs("div",{className:"-mx-5 border-b px-5 py-5",children:[e.jsx("h1",{className:"text-2xl font-semibold leading-normal",children:"Manajemen User"}),e.jsx("p",{className:"text-muted-foreground",children:"Create, edit, or delete user accounts."})]}),e.jsxs("div",{className:"mb-4 mt-5 flex items-center justify-between",children:[e.jsxs("div",{className:"relative w-72",children:[e.jsx(B,{className:"absolute left-3 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-muted-foreground"}),e.jsx(t,{type:"text",placeholder:"Search users...",value:c,onChange:s=>T(s.target.value),className:"pl-8"})]}),e.jsxs(i,{variant:"default",onClick:()=>m(!0),children:[e.jsx(H,{})," Tambah User"]})]}),e.jsx("div",{className:"overflow-hidden rounded-lg border",children:e.jsxs(R,{children:[e.jsx(q,{className:"bg-muted",children:e.jsxs(h,{children:[e.jsx(d,{className:"w-[10px] border-r",children:"No"}),e.jsx(d,{className:"w-[200px] border-r",children:"Name"}),e.jsx(d,{className:"border-r",children:"Email"}),e.jsx(d,{className:"w-min px-2",children:"Aksi"})]})}),e.jsx(z,{children:j.length>0?j.map((s,O)=>e.jsxs(h,{children:[e.jsx(n,{className:"border-r text-center",children:O+1}),e.jsx(n,{className:"border-r",children:s.name}),e.jsx(n,{className:"border-r",children:s.email}),e.jsx(n,{className:"w-8 px-0 py-0 text-center",children:e.jsxs(J,{children:[e.jsx(K,{asChild:!0,children:e.jsx(i,{variant:"ghost",className:"m-0 h-8 w-8 p-0",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsxs(Q,{className:"w-36",align:"end",children:[e.jsxs(y,{className:"cursor-pointer",onClick:()=>k(s),children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsx(V,{}),e.jsxs(y,{className:"cursor-pointer text-red-600 focus:text-red-600",onClick:()=>M(s.id),children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},s.id)):e.jsx(h,{children:e.jsx(n,{colSpan:"4",className:"h-24 text-center",children:"No users found."})})})]})}),e.jsx(w,{open:E,onOpenChange:m,children:e.jsx(f,{className:"sm:max-w-[425px]",children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs(N,{children:[e.jsx(v,{children:"Create New User"}),e.jsx(g,{children:"Fill in the details to create a new user account."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"create_name",children:"Name"}),e.jsx(t,{id:"create_name",type:"text",value:r.data.name,onChange:s=>r.setData("name",s.target.value),autoComplete:"off"}),r.errors.name&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"create_email",children:"Email"}),e.jsx(t,{id:"create_email",type:"email",value:r.data.email,onChange:s=>r.setData("email",s.target.value),autoComplete:"off"}),r.errors.email&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"create_password",children:"Password"}),e.jsx(t,{id:"create_password",type:"password",value:r.data.password,onChange:s=>r.setData("password",s.target.value)}),r.errors.password&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"create_password_confirmation",children:"Confirm Password"}),e.jsx(t,{id:"create_password_confirmation",type:"password",value:r.data.password_confirmation,onChange:s=>r.setData("password_confirmation",s.target.value)})]}),e.jsxs(C,{children:[e.jsx(b,{asChild:!0,children:e.jsx(i,{variant:"outline",children:"Cancel"})}),e.jsxs(i,{type:"submit",disabled:r.processing,children:[r.processing&&e.jsx(D,{className:"h-4 w-4 animate-spin"}),"Create"]})]})]})})}),e.jsx(w,{open:F,onOpenChange:p,children:e.jsx(f,{className:"sm:max-w-[425px]",children:e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs(N,{children:[e.jsx(v,{children:"Edit User"}),e.jsx(g,{children:"Update the user details."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"edit_name",children:"Name"}),e.jsx(t,{id:"edit_name",type:"text",value:a.data.name,onChange:s=>a.setData("name",s.target.value),autoComplete:"off"}),a.errors.name&&e.jsx("p",{className:"text-sm text-destructive",children:a.errors.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"edit_email",children:"Email"}),e.jsx(t,{id:"edit_email",type:"email",value:a.data.email,onChange:s=>a.setData("email",s.target.value),autoComplete:"off"}),a.errors.email&&e.jsx("p",{className:"text-sm text-destructive",children:a.errors.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"edit_password",children:"New Password (leave blank to keep current)"}),e.jsx(t,{id:"edit_password",type:"password",value:a.data.password,onChange:s=>a.setData("password",s.target.value)}),a.errors.password&&e.jsx("p",{className:"text-sm text-destructive",children:a.errors.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"edit_password_confirmation",children:"Confirm New Password"}),e.jsx(t,{id:"edit_password_confirmation",type:"password",value:a.data.password_confirmation,onChange:s=>a.setData("password_confirmation",s.target.value)})]}),e.jsxs(C,{children:[e.jsx(b,{asChild:!0,children:e.jsx(i,{variant:"outline",children:"Cancel"})}),e.jsxs(i,{type:"submit",disabled:a.processing,children:[a.processing&&e.jsx(D,{className:"h-4 w-4 animate-spin"}),"Update"]})]})]})})})]})}export{he as default};
